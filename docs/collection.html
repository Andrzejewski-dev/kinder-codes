<!DOCTYPE html>
<html lang="pl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
<title>SprawdzJajo.pl</title>
<link rel="stylesheet" href="style.css">
<link rel="stylesheet" href="collection.css">
<link rel="icon" type="image/png" href="favicon-96x96.png" sizes="96x96" />
<link rel="icon" type="image/svg+xml" href="favicon.svg" />
<link rel="shortcut icon" href="favicon.ico" />
<link rel="apple-touch-icon" sizes="180x180" href="apple-touch-icon.png" />
<link rel="manifest" href="site.webmanifest" />
<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-0ZDNYFJ4XN"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-0ZDNYFJ4XN');
</script>
<script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8959533352247494"
     crossorigin="anonymous"></script>
</head>
<body>
  <header class="header">
    <img src="logo.png" alt="SprawdzJajo.pl" id="logo" />
    <div class="hamburger" id="hamburger">☰</div>
  </header>

  <!-- Full-screen slide menu -->
  <div class="menu-overlay" id="menuOverlay"></div>
  <nav class="side-menu" id="sideMenu">
    <button class="close-menu" id="closeMenu">×</button>
    <h2>Menu</h2>
    <a href="index.html" id="menuScan">Szukaj</a>
    <a href="list.html" id="menuList">Lista figurek</a>
    <a href="collection.html" id="menuCollection">Moja kolekcja</a>
    <a href="scans.html" id="menuScans">Moje skany</a>
  </nav>

  <div class="section-header">
    <h2 class="section-title">Moja kolekcja</h2>
  </div>

  <div class="scanner-card">
    <div id="collection-list"></div>
    <button id="addToCollectionBtn" class="add-btn">+ Dodaj</button>
  </div>

  <!-- Modal for adding new figure -->
  <div class="modal-overlay" id="modalOverlay">
    <div class="modal">
      <h3>Wybierz figurkę do dodania</h3>
      <div id="figure-select-list" class="figure-select-list"></div>
      <button id="closeModal" class="close-modal">Zamknij</button>
    </div>
  </div>
  <!-- Confirmation modal -->
<div class="confirm-overlay" id="confirmOverlay">
  <div class="confirm-modal">
    <div id="confirm-image"></div>
    <p>Czy na pewno chcesz usunąć tę figurkę z kolekcji?</p>
    <div class="confirm-buttons">
      <button id="confirmYes" class="confirm-yes">Usuń</button>
      <button id="confirmNo" class="confirm-no">Anuluj</button>
    </div>
  </div>
</div>
  <section class="about">
    <h2>Moja kolekcja</h2>
    <p>
      Zakładka <strong>Moja kolekcja</strong> to miejsce, w którym możesz stworzyć własny spis wszystkich figurek,
      które udało Ci się zdobyć. Dzięki temu zawsze masz pod ręką pełen przegląd swojej kolekcji i wiesz,
      które modele już masz, a których jeszcze brakuje do kompletu. To idealne rozwiązanie dla osób,
      które lubią porządek i chcą w łatwy sposób śledzić swoje postępy w zbieraniu.
    </p>

    <h3>Jak to działa</h3>
    <p>
      Dodawanie figurek do kolekcji jest bardzo proste. Wystarczy odnaleźć interesujący Cię model na
      <a href="list.html">liście figurek</a> i kliknąć przycisk „Dodaj do kolekcji”.  
      Od tego momentu figurka pojawi się w Twojej prywatnej bazie w tej zakładce. Możesz również usuwać modele,
      edytować ich stan lub oznaczać te, które są Twoimi ulubionymi.
    </p>
    <p>
      Wszystkie dane zapisują się automatycznie w Twojej przeglądarce, więc nie musisz się logować ani zakładać konta.
      Kolekcja jest widoczna tylko dla Ciebie i pozostaje bezpiecznie przechowywana lokalnie na Twoim urządzeniu.
    </p>

    <h3>Połącz kolekcję z Twoimi skanami</h3>
    <p>
      Jeśli korzystasz również z zakładki <a href="scans.html">Moje skany</a>, możesz szybko przenosić znalezione figurki
      bezpośrednio do swojej kolekcji. Wystarczy, że po każdym skanie zaznaczysz, jaka figurka się trafiła —
      wtedy automatycznie możesz ją dodać do swojego zbioru jednym kliknięciem.
    </p>
    <p>
      Dzięki temu Twoja kolekcja będzie zawsze aktualna, a Ty zyskasz pełną historię swoich skanów i odkryć.
    </p>

    <h3>Aktualizowana baza figurek</h3>
    <p>
      Baza dostępnych figurek jest codziennie aktualizowana na podstawie informacji przesyłanych przez użytkowników.
      To oznacza, że regularnie pojawiają się nowe modele i serie, które możesz dodać do swojej kolekcji.
      System uczy się na podstawie zgłoszeń społeczności, dlatego im więcej osób korzysta z aplikacji,
      tym dokładniejsze stają się dane o poszczególnych figurkach.
    </p>
    <p>
      Warto więc co jakiś czas odwiedzać stronę i sprawdzać, czy do bazy nie trafiły nowe elementy, które mogą Cię zainteresować.
    </p>

    <h3>Porządkuj i planuj swoją kolekcję</h3>
    <p>
      Zakładka <strong>Moja kolekcja</strong> została zaprojektowana tak, aby pomóc Ci w utrzymaniu porządku w Twoich zbiorach.
      Możesz przeglądać swoje figurki w formie czytelnej listy lub miniatur, sortować je według serii, numeru lub daty dodania.
      To praktyczne narzędzie, które ułatwia planowanie dalszego zbierania lub wymiany z innymi kolekcjonerami.
    </p>
    <p>
      W przyszłości planowane są dodatkowe funkcje, takie jak eksport kolekcji, podgląd statystyk czy oznaczanie duplikatów,
      aby zarządzanie Twoim zbiorem było jeszcze wygodniejsze.
    </p>

    <h3>Twoja kolekcja, Twoje zasady</h3>
    <p>
      Wszystko, co dodasz do swojej kolekcji, pozostaje tylko Twoje — nikt inny nie ma do tego dostępu.
      Możesz w dowolnej chwili wyczyścić dane, dodać nowe figurki lub zmienić ich opis.
      Serwis nie przechowuje żadnych danych osobowych i działa w pełni lokalnie, co gwarantuje prywatność i bezpieczeństwo.
    </p>
    <p>
      Stwórz swoją kolekcję, rozwijaj ją z czasem i ciesz się satysfakcją z kompletowania serii.
      Im więcej użytkowników korzysta z tej funkcji, tym szybciej rozwija się cała społeczność i baza danych figurek.
    </p>
  </section>

  <footer class="footer">
    <p>© 2025 SprawdzJajo.pl</p>
  </footer>


  <script src="figures.js"></script>
  <script src="menu.js"></script>
  <script>
  document.addEventListener('DOMContentLoaded', () => {
    const collectionDiv = document.getElementById('collection-list');
    const modalOverlay = document.getElementById('modalOverlay');
    const figureSelectList = document.getElementById('figure-select-list');
    const closeModal = document.getElementById('closeModal');
    const addBtn = document.getElementById('addToCollectionBtn');
    
    const confirmOverlay = document.getElementById('confirmOverlay');
    const confirmYes = document.getElementById('confirmYes');
    const confirmNo = document.getElementById('confirmNo');
    const confirmImg = document.getElementById('confirm-image');

    let itemToDelete = null;

    function getCollection() {
      return JSON.parse(localStorage.getItem('scannedCodes')) || [];
    }

    function saveCollection(data) {
      localStorage.setItem('scannedCodes', JSON.stringify(data));
    }

    function renderCollection() {
      const scannedCodes = getCollection();
      const approved = scannedCodes.filter(item => item.approved);

      if (approved.length === 0) {
        collectionDiv.innerHTML = "<p>Brak zatwierdzonych figurek w kolekcji.</p>";
        return;
      }

      collectionDiv.innerHTML = approved.map(item => {
        const figure = figures.find(f => f.id === item.figureId);
        if (!figure) return "";

        return `
          <div class="figure-card" data-id="${item.id}" data-figure-id="${figure.id}">
            <div class="figure-img-container">
              <img src="${figure.img}" alt="${figure.name}">
              <button class="remove-btn" title="Usuń">×</button>
            </div>
            <div class="figure-info">
              <h3>${figure.name}</h3>
            </div>
          </div>
        `;
      }).join('');

      // attach remove button handlers
      document.querySelectorAll('.remove-btn').forEach(btn => {
        btn.addEventListener('click', e => {
          const card = e.target.closest('.figure-card');
          const figureId = parseInt(card.dataset.figureId);
          const figure = figures.find(f => f.id === figureId);
          itemToDelete = card.dataset.id;

          // pokaż obrazek w modalu potwierdzenia
          if (figure) {
            confirmImg.innerHTML = `<img src="${figure.img}" alt="${figure.name}" style="max-width:120px; border-radius:10px; margin-bottom:10px;">`;
          } else {
            confirmImg.innerHTML = '';
          }

          confirmOverlay.classList.add('visible');
        });
      });
    }

    // Confirm delete
    confirmYes.addEventListener('click', () => {
      if (!itemToDelete) return;
      let scannedCodes = getCollection();
      scannedCodes = scannedCodes.filter(i => i.id !== itemToDelete);
      saveCollection(scannedCodes);
      itemToDelete = null;
      confirmOverlay.classList.remove('visible');
      confirmImg.innerHTML = '';
      renderCollection();
    });

    confirmNo.addEventListener('click', () => {
      itemToDelete = null;
      confirmOverlay.classList.remove('visible');
      confirmImg.innerHTML = '';
    });

    // Show modal to add new figure
    addBtn.addEventListener('click', () => {
      modalOverlay.classList.add('visible');
      figureSelectList.innerHTML = figures.map(f => `
        <div class="figure-option" data-id="${f.id}">
          <img src="${f.img}" alt="${f.name}">
          <span>${f.name}</span>
        </div>
      `).join('');

      document.querySelectorAll('.figure-option').forEach(opt => {
        opt.addEventListener('click', () => {
          const id = parseInt(opt.dataset.id);
          const figure = figures.find(f => f.id === id);
          if (!figure) return;

          const scannedCodes = getCollection();
          scannedCodes.push({
            id: crypto.randomUUID(),
            code: figure.codes[0],
            figureId: figure.id,
            approved: true,
            manual: true
          });
          saveCollection(scannedCodes);
          renderCollection();
          modalOverlay.classList.remove('visible');
        });
      });
    });

    closeModal.addEventListener('click', () => {
      modalOverlay.classList.remove('visible');
    });

    renderCollection();
  });
</script>


</body>
</html>
